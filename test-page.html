<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binance Alpha æµ‹è¯•é¡µé¢ - æ’ä»¶åŠŸèƒ½éªŒè¯</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0b0e11;
            color: #eaecef;
            padding: 20px;
            line-height: 1.6;
        }

        .test-banner {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }

        .test-banner h1 {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .test-banner p {
            font-size: 14px;
            opacity: 0.9;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
        }

        .sidebar {
            background: #1e2329;
            border-radius: 12px;
            padding: 20px;
        }

        .main-content {
            background: #1e2329;
            border-radius: 12px;
            padding: 20px;
        }

        .coin-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid #2b3139;
        }

        .coin-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }

        .coin-info h2 {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .coin-info .pair {
            color: #848e9c;
            font-size: 14px;
        }

        /* ä»·æ ¼æ˜¾ç¤ºåŒºåŸŸ */
        .price-section {
            margin-bottom: 30px;
        }

        .price-section h3 {
            font-size: 14px;
            color: #848e9c;
            margin-bottom: 12px;
        }

        .price-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .price-item {
            background: #2b3139;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .price-item:hover {
            background: #2e3642;
        }

        .price-item .label {
            font-size: 12px;
            color: #848e9c;
            margin-bottom: 6px;
        }

        /* âš ï¸ æ’ä»¶éœ€è¦çš„é€‰æ‹©å™¨ */
        .flex-1.cursor-pointer {
            font-size: 18px;
            font-weight: 600;
            color: #0ecb81;
        }

        /* è®¢å•ç°¿ */
        .orderbook {
            background: #2b3139;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .orderbook h4 {
            font-size: 14px;
            margin-bottom: 12px;
            color: #848e9c;
        }

        .orderbook-row {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 13px;
        }

        .orderbook-row .price {
            color: #0ecb81;
        }

        /* äº¤æ˜“è¡¨å•åŒºåŸŸ */
        .trading-panel {
            background: #2b3139;
            border-radius: 12px;
            padding: 20px;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }

        /* âš ï¸ æ’ä»¶å¯èƒ½éœ€è¦çš„æ ‡ç­¾é€‰æ‹©å™¨ */
        .bn-tab {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: #848e9c;
            cursor: pointer;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .bn-tab.active {
            background: #1e2329;
            color: #eaecef;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-size: 12px;
            color: #848e9c;
            margin-bottom: 8px;
            font-weight: 600;
        }

        /* âš ï¸ æ’ä»¶éœ€è¦çš„è¾“å…¥æ¡†é€‰æ‹©å™¨ */
        input[type="text"] {
            width: 100%;
            padding: 12px;
            background: #1e2329;
            border: 1px solid #2b3139;
            border-radius: 8px;
            color: #eaecef;
            font-size: 14px;
            font-weight: 600;
        }

        input:focus {
            outline: none;
            border-color: #f0b90b;
        }

        .input-with-suffix {
            position: relative;
        }

        .input-suffix {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #848e9c;
            font-size: 12px;
        }

        /* âš ï¸ åå‘è®¢å•å¤é€‰æ¡† */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
            padding: 12px;
            background: #1e2329;
            border-radius: 8px;
            cursor: pointer;
        }

        .checkbox-group:hover {
            background: #252c35;
        }

        /* âš ï¸ æ’ä»¶éœ€è¦çš„ checkbox é€‰æ‹©å™¨ */
        .bn-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #f0b90b;
        }

        .bn-checkbox.bn-checkbox__square {
            border-radius: 4px;
        }

        .bn-checkbox.data-size-md {
            width: 20px;
            height: 20px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            color: #eaecef;
        }

        /* âš ï¸ æ’ä»¶éœ€è¦çš„æŒ‰é’®é€‰æ‹©å™¨ */
        .bn-button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .bn-button__buy {
            background: #0ecb81;
            color: white;
        }

        .bn-button__buy:hover {
            background: #0bb871;
        }

        .bn-button__sell {
            background: #f6465d;
            color: white;
        }

        .bn-button__primary {
            background: #f0b90b;
            color: #0b0e11;
        }

        .bn-button__primary:hover {
            background: #f8d12f;
        }

        .data-size-middle {
            height: 48px;
        }

        .w-full {
            width: 100%;
        }

        /* ç¡®è®¤å¼¹çª— */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: #1e2329;
            border-radius: 12px;
            padding: 24px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .modal h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #eaecef;
        }

        .modal-content {
            margin-bottom: 24px;
        }

        .modal-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 14px;
            border-bottom: 1px solid #2b3139;
        }

        .modal-row:last-child {
            border-bottom: none;
        }

        .modal-row .label {
            color: #848e9c;
        }

        .modal-row .value {
            font-weight: 600;
            color: #eaecef;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
        }

        .modal-actions button {
            flex: 1;
        }

        /* æ—¥å¿—åŒºåŸŸ */
        .log-section {
            margin-top: 30px;
            background: #2b3139;
            border-radius: 12px;
            padding: 20px;
        }

        .log-section h3 {
            font-size: 16px;
            margin-bottom: 12px;
            color: #f0b90b;
        }

        .log-content {
            background: #0b0e11;
            border-radius: 8px;
            padding: 12px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        .log-entry {
            padding: 4px 0;
            color: #848e9c;
        }

        .log-entry.success {
            color: #0ecb81;
        }

        .log-entry.error {
            color: #f6465d;
        }

        .log-entry .timestamp {
            color: #5e6673;
            margin-right: 8px;
        }

        /* è™šæ‹Ÿè¡¨æ ¼ï¼ˆç”¨äºæµ‹è¯•åˆ—è¡¨æŠ“å–åŠŸèƒ½ï¼‰ */
        .bn-virtual-table {
            margin-top: 20px;
        }

        .bn-virtual-table > div > div {
            background: #2b3139;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .t-caption2.cursor-pointer {
            font-weight: 600;
            cursor: pointer;
        }

        .t-caption1 {
            font-size: 12px;
            color: #848e9c;
        }

        .gain-positive {
            color: #0ecb81;
        }

        .gain-negative {
            color: #f6465d;
        }

        /* ä½™é¢æ˜¾ç¤ºæ ·å¼ */
        #accountBalance {
            transition: all 0.3s ease;
        }

        #accountBalance.balance-increase {
            animation: balanceIncrease 0.6s ease;
        }

        #accountBalance.balance-decrease {
            animation: balanceDecrease 0.6s ease;
        }

        @keyframes balanceIncrease {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); color: #0ecb81; }
        }

        @keyframes balanceDecrease {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); color: #f6465d; }
        }
    </style>
</head>
<body>
    <div class="test-banner">
        <h1>ğŸ§ª Binance Alpha æ’ä»¶æµ‹è¯•é¡µé¢</h1>
        <p>æ­¤é¡µé¢æ¨¡æ‹Ÿäº† Binance Alpha äº¤æ˜“ç•Œé¢ï¼Œç”¨äºæµ‹è¯• Chrome æ‰©å±•åŠŸèƒ½</p>
    </div>

    <div class="container">
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <div class="orderbook">
                <h4>ğŸ“Š è®¢å•ç°¿</h4>
                <div class="orderbook-row">
                    <span class="price">0.00123</span>
                    <span>1500</span>
                </div>
                <div class="orderbook-row">
                    <span class="price">0.00122</span>
                    <span>2300</span>
                </div>
                <div class="orderbook-row">
                    <span class="price">0.00121</span>
                    <span>5000</span>
                </div>
            </div>

            <!-- è™šæ‹Ÿåˆ—è¡¨ï¼ˆç”¨äºæµ‹è¯• scrapeListDataï¼‰ -->
            <div class="bn-virtual-table">
                <h4 style="color: #848e9c; margin-bottom: 12px;">ğŸ“ˆ å¸ç§åˆ—è¡¨</h4>
                <div>
                    <div>
                        <div>
                            <div class="t-caption2 cursor-pointer">BTC/USDT</div>
                            <div class="t-caption1">æ¯”ç‰¹å¸</div>
                            <div class="t-caption1">æˆäº¤é‡: 1.2M</div>
                            <div class="t-caption1 gain-positive">+5.23%</div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <div class="t-caption2 cursor-pointer">ETH/USDT</div>
                            <div class="t-caption1">ä»¥å¤ªåŠ</div>
                            <div class="t-caption1">æˆäº¤é‡: 800K</div>
                            <div class="t-caption1 gain-positive">+3.15%</div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <div class="t-caption2 cursor-pointer">SOL/USDT</div>
                            <div class="t-caption1">Solana</div>
                            <div class="t-caption1">æˆäº¤é‡: 500K</div>
                            <div class="t-caption1 gain-negative">-1.82%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <!-- å¸ç§å¤´éƒ¨ -->
            <div class="coin-header">
                <div class="coin-icon">A</div>
                <div class="coin-info">
                    <h2>ALPHA Token</h2>
                    <div class="pair">ALPHA/USDT</div>
                </div>
                <div style="margin-left: auto; text-align: right;">
                    <div style="font-size: 11px; color: #848e9c; margin-bottom: 4px;">
                        å¯ç”¨ä½™é¢ (USDT)
                        <button onclick="resetBalance()" style="margin-left: 8px; padding: 2px 8px; font-size: 10px; background: #2b3139; border: 1px solid #374151; border-radius: 4px; color: #848e9c; cursor: pointer;">é‡ç½®</button>
                    </div>
                    <!-- âš ï¸ å…³é”®å…ƒç´ ï¼šè´¦æˆ·ä½™é¢æ˜¾ç¤º -->
                    <div class="text-PrimaryText text-[12px] leading-[18px] font-[500]" id="accountBalance" style="font-size: 16px; font-weight: 700; color: #eaecef;">1000.00</div>
                </div>
            </div>

            <!-- ä»·æ ¼æ˜¾ç¤º -->
            <div class="price-section">
                <h3>ğŸ’° å®æ—¶ä»·æ ¼</h3>
                <div class="price-grid">
                    <div class="price-item">
                        <div class="label">æœ€æ–°ä»·</div>
                        <!-- âš ï¸ å…³é”®é€‰æ‹©å™¨ï¼šæ’ä»¶ä¼šè¯»å–è¿™ä¸ªå…ƒç´  -->
                        <div class="flex-1 cursor-pointer">0.00120</div>
                    </div>
                    <div class="price-item">
                        <div class="label">24hæ¶¨å¹…</div>
                        <div class="flex-1 cursor-pointer" style="color: #0ecb81;">+12.50%</div>
                    </div>
                    <div class="price-item">
                        <div class="label">24hæˆäº¤é‡</div>
                        <div class="flex-1 cursor-pointer" style="color: #eaecef;">$2.5M</div>
                    </div>
                </div>
            </div>

            <!-- äº¤æ˜“è¡¨å• -->
            <div class="trading-panel">
                <div class="tabs">
                    <!-- âš ï¸ æ’ä»¶å¯èƒ½ä¼šç‚¹å‡»è¿™äº›æ ‡ç­¾ -->
                    <button class="bn-tab bn-tab__primary-gray data-size-small data-font-4 active">é™ä»·å•</button>
                    <button class="bn-tab bn-tab__primary-gray data-size-small data-font-4">å¸‚ä»·å•</button>
                </div>

                <form id="tradeForm">
                    <div class="form-group">
                        <label for="limitPrice">ä¹°å…¥ä»·æ ¼</label>
                        <div class="input-with-suffix">
                            <!-- âš ï¸ å…³é”®è¾“å…¥æ¡†ï¼š#limitPrice -->
                            <input type="text" id="limitPrice" placeholder="0.00000">
                            <span class="input-suffix">USDT</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="limitTotal">ä¹°å…¥æ•°é‡</label>
                        <div class="input-with-suffix">
                            <!-- âš ï¸ å…³é”®è¾“å…¥æ¡†ï¼š#limitTotal (ç¬¬1ä¸ª) -->
                            <input type="text" id="limitTotal" placeholder="0">
                            <span class="input-suffix">USDT</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="sellPrice">å–å‡ºä»·æ ¼</label>
                        <div class="input-with-suffix">
                            <!-- âš ï¸ å…³é”®è¾“å…¥æ¡†ï¼š#limitTotal (ç¬¬2ä¸ª) -->
                            <input type="text" id="limitTotal" placeholder="0.00000">
                            <span class="input-suffix">USDT</span>
                        </div>
                    </div>

                    <!-- âš ï¸ å…³é”®å¤é€‰æ¡†ï¼šåå‘è®¢å• -->
                    <div class="checkbox-group" onclick="document.getElementById('reverseOrder').checked = !document.getElementById('reverseOrder').checked">
                        <input type="checkbox" id="reverseOrder" class="bn-checkbox bn-checkbox__square data-size-md" onclick="event.stopPropagation()">
                        <label for="reverseOrder" onclick="event.stopPropagation()">å¯ç”¨åå‘è®¢å•ï¼ˆä¹°å…¥åè‡ªåŠ¨æŒ‚å–å•ï¼‰</label>
                    </div>

                    <!-- âš ï¸ å…³é”®æŒ‰é’®ï¼šä¹°å…¥æŒ‰é’® -->
                    <button type="button" class="bn-button bn-button__buy data-size-middle w-full" onclick="showConfirmModal()">
                        ä¹°å…¥ ALPHA
                    </button>
                </form>
            </div>

            <!-- æ—¥å¿—åŒºåŸŸ -->
            <div class="log-section">
                <h3>ğŸ“‹ æ“ä½œæ—¥å¿—</h3>
                <div class="log-content" id="logContent">
                    <div class="log-entry">
                        <span class="timestamp">[00:00:00]</span>
                        ç­‰å¾…æ’ä»¶æ“ä½œ...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- âš ï¸ ç¡®è®¤å¼¹çª— -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <h3>âœ… ç¡®è®¤äº¤æ˜“</h3>
            <div class="modal-content">
                <div class="modal-row">
                    <span class="label">äº¤æ˜“å¯¹</span>
                    <span class="value">ALPHA/USDT</span>
                </div>
                <div class="modal-row">
                    <span class="label">ä¹°å…¥ä»·æ ¼</span>
                    <span class="value" id="modalBuyPrice">-</span>
                </div>
                <div class="modal-row">
                    <span class="label">ä¹°å…¥æ•°é‡</span>
                    <span class="value" id="modalAmount">-</span>
                </div>
                <div class="modal-row">
                    <span class="label">å–å‡ºä»·æ ¼</span>
                    <span class="value" id="modalSellPrice">-</span>
                </div>
                <div class="modal-row">
                    <span class="label">åå‘è®¢å•</span>
                    <span class="value" id="modalReverseOrder">-</span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="bn-button bn-button__primary data-size-middle w-full" onclick="confirmTrade()">
                    ç¡®è®¤
                </button>
                <button class="bn-button data-size-middle w-full" style="background: #2b3139; color: #eaecef;" onclick="closeModal()">
                    å–æ¶ˆ
                </button>
            </div>
        </div>
    </div>

    <script>
        // æ—¥å¿—åŠŸèƒ½
        function addLog(message, type = 'info') {
            const logContent = document.getElementById('logContent');
            const timestamp = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.innerHTML = `<span class="timestamp">[${timestamp}]</span>${message}`;
            logContent.appendChild(entry);
            logContent.scrollTop = logContent.scrollHeight;
        }

        // æ˜¾ç¤ºç¡®è®¤å¼¹çª—
        function showConfirmModal() {
            const buyPriceInput = document.querySelectorAll('#limitPrice')[0];
            const amountInput = document.querySelectorAll('#limitTotal')[0];
            const sellPriceInput = document.querySelectorAll('#limitTotal')[1];

            const buyPrice = buyPriceInput?.value || 'æœªå¡«å†™';
            const amount = amountInput?.value || 'æœªå¡«å†™';
            const sellPrice = sellPriceInput?.value || 'æœªå¡«å†™';
            const reverseOrder = document.getElementById('reverseOrder').checked;

            addLog(`ğŸ“‹ å¼¹çª—å‰è¯»å–: ä¹°å…¥ä»·="${buyPrice}", æ•°é‡="${amount}", å–å‡ºä»·="${sellPrice}"`, 'info');

            document.getElementById('modalBuyPrice').textContent = buyPrice + ' USDT';
            document.getElementById('modalAmount').textContent = amount + ' USDT';
            document.getElementById('modalSellPrice').textContent = sellPrice + ' USDT';
            document.getElementById('modalReverseOrder').textContent = reverseOrder ? 'âœ… å·²å¯ç”¨' : 'âŒ æœªå¯ç”¨';

            document.getElementById('modalOverlay').classList.add('show');

            addLog('ğŸ”” æ˜¾ç¤ºç¡®è®¤å¼¹çª—', 'info');
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('show');
            addLog('âŒ å–æ¶ˆäº¤æ˜“', 'error');
        }

        // ç¡®è®¤äº¤æ˜“
        function confirmTrade() {
            const buyPrice = parseFloat(document.querySelectorAll('#limitPrice')[0].value) || 0;
            const amount = parseFloat(document.querySelectorAll('#limitTotal')[0].value) || 0;
            const sellPrice = parseFloat(document.querySelectorAll('#limitTotal')[1].value) || 0;
            const reverseOrder = document.getElementById('reverseOrder').checked;

            addLog(`ğŸ” è¯»å–è¾“å…¥: ä¹°å…¥ä»·=${buyPrice}, æ•°é‡=${amount}, å–å‡ºä»·=${sellPrice}, åå‘è®¢å•=${reverseOrder}`, 'info');

            // è·å–å½“å‰ä½™é¢
            const balanceEl = document.getElementById('accountBalance');
            const currentBalance = parseFloat(balanceEl.textContent) || 1000;
            addLog(`ğŸ’¼ äº¤æ˜“å‰ä½™é¢: ${currentBalance.toFixed(2)} USDT`, 'info');

            let netChange = 0;

            if (reverseOrder) {
                // å¯ç”¨åå‘è®¢å•ï¼šä¹°å…¥åç«‹å³å–å‡º
                // ä¹°å…¥æˆæœ¬
                const buyCost = amount;

                // è®¡ç®—ä¹°åˆ°çš„å¸æ•°é‡
                const coinAmount = amount / buyPrice;

                // å–å‡ºæ”¶å…¥
                const sellIncome = coinAmount * sellPrice;

                // å‡€å˜åŒ– = å–å‡ºæ”¶å…¥ - ä¹°å…¥æˆæœ¬ï¼ˆåªç®—ä»·å·®æ‘©æ“¦ï¼‰
                netChange = sellIncome - buyCost;

                addLog(`âœ… äº¤æ˜“æˆåŠŸï¼ä¹°å…¥ä»·: ${buyPrice}, æ•°é‡: ${amount} USDT, å–å‡ºä»·: ${sellPrice}`, 'success');
                addLog(`ğŸ’° ä¹°å…¥æˆæœ¬: ${buyCost.toFixed(4)} USDT â†’ è·å¾— ${coinAmount.toFixed(2)} ä¸ªå¸`, 'info');
                addLog(`ğŸ’° å–å‡º ${coinAmount.toFixed(2)} ä¸ªå¸ â†’ æ”¶å…¥ ${sellIncome.toFixed(4)} USDT`, 'info');
                addLog(`ğŸ’¸ ä»·å·®æ‘©æ“¦: ${netChange >= 0 ? '+' : ''}${netChange.toFixed(4)} USDT (${netChange >= 0 ? 'ç›ˆåˆ©' : 'äºæŸ'})`, netChange >= 0 ? 'success' : 'error');
            } else {
                // æœªå¯ç”¨åå‘è®¢å•ï¼šä»…ä¹°å…¥ï¼Œä¸å–å‡º
                // ä½™é¢å…¨éƒ¨èŠ±æ‰ï¼ˆå®é™…åº”è¯¥æ˜¯æ‹¿åˆ°å¸ï¼Œä½†è¿™é‡Œç®€åŒ–ä¸ºä½™é¢å‡å°‘ï¼‰
                netChange = -amount;
                addLog(`âœ… ä¹°å…¥æˆåŠŸï¼ä¹°å…¥ä»·: ${buyPrice}, èŠ±è´¹: ${amount} USDT (æœªè®¾ç½®å–å‡º)`, 'success');
                addLog(`ğŸ’¸ ä½™é¢å‡å°‘: ${amount.toFixed(2)} USDT (ä»…ä¹°å…¥ï¼Œæœªå–å‡º)`, 'error');
            }

            // æ›´æ–°ä½™é¢
            const newBalance = currentBalance + netChange;
            const newBalanceRounded = parseFloat(newBalance.toFixed(2));
            balanceEl.textContent = newBalanceRounded.toFixed(2);

            // éªŒè¯ä½™é¢æ˜¯å¦çœŸçš„æ›´æ–°äº†ï¼ˆå…è®¸0.01çš„è¯¯å·®ï¼‰
            const verifyBalance = parseFloat(balanceEl.textContent);
            const isCorrect = Math.abs(verifyBalance - newBalanceRounded) < 0.01;
            addLog(`ğŸ’¼ ä½™é¢æ›´æ–°: ${currentBalance.toFixed(2)} â†’ ${newBalanceRounded.toFixed(2)} USDT`, 'info');
            addLog(`âœ… ä½™é¢éªŒè¯: DOMæ˜¾ç¤ºä¸º ${verifyBalance.toFixed(2)} USDT ${isCorrect ? '(æ­£ç¡®)' : '(å¼‚å¸¸!)'}`, isCorrect ? 'success' : 'error');

            // æ·»åŠ ä½™é¢å˜åŒ–åŠ¨ç”»
            balanceEl.classList.remove('balance-increase', 'balance-decrease');
            setTimeout(() => {
                if (netChange > 0) {
                    balanceEl.classList.add('balance-increase');
                } else if (netChange < 0) {
                    balanceEl.classList.add('balance-decrease');
                }
                setTimeout(() => {
                    balanceEl.classList.remove('balance-increase', 'balance-decrease');
                }, 600);
            }, 10);

            closeModal();

            // æ¸…ç©ºè¡¨å•
            document.querySelectorAll('input[type="text"]').forEach(input => input.value = '');
        }

        // ç›‘å¬è¾“å…¥å˜åŒ–
        document.querySelectorAll('input').forEach((input, index) => {
            input.addEventListener('input', (e) => {
                // ç”±äºæœ‰é‡å¤çš„ id="limitTotal"ï¼Œç”¨æ›´è¯¦ç»†çš„æè¿°
                let fieldName = e.target.id || e.target.name || 'æœªçŸ¥å­—æ®µ';
                if (e.target.id === 'limitTotal') {
                    const allLimitTotal = document.querySelectorAll('#limitTotal');
                    const inputIndex = Array.from(allLimitTotal).indexOf(e.target);
                    if (inputIndex === 0) {
                        fieldName = 'limitTotal[ä¹°å…¥æ•°é‡]';
                    } else if (inputIndex === 1) {
                        fieldName = 'limitTotal[å–å‡ºä»·æ ¼]';
                    } else {
                        fieldName = `limitTotal[${inputIndex}]`;
                    }
                }
                addLog(`ğŸ“ è¾“å…¥å˜åŒ–: ${fieldName} = "${e.target.value}"`, 'info');
            });
        });

        // ç›‘å¬å¤é€‰æ¡†å˜åŒ–
        document.getElementById('reverseOrder').addEventListener('change', (e) => {
            // åŒæ­¥ aria-checked å±æ€§ï¼Œè®©æ’ä»¶çš„ isReverseOrderEnabled() èƒ½æ­£ç¡®æ£€æµ‹
            e.target.setAttribute('aria-checked', e.target.checked ? 'true' : 'false');
            addLog(`${e.target.checked ? 'âœ…' : 'âŒ'} åå‘è®¢å•çŠ¶æ€: ${e.target.checked ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}`, e.target.checked ? 'success' : 'info');
        });

        // é‡ç½®ä½™é¢
        function resetBalance() {
            const balanceEl = document.getElementById('accountBalance');
            balanceEl.textContent = '1000.00';
            addLog('ğŸ”„ ä½™é¢å·²é‡ç½®ä¸º 1000.00 USDT', 'info');
        }

        // é¡µé¢åŠ è½½å®Œæˆ
        window.addEventListener('load', () => {
            // åˆå§‹åŒ–å¤é€‰æ¡†çš„ aria-checked å±æ€§
            const checkbox = document.getElementById('reverseOrder');
            checkbox.setAttribute('aria-checked', checkbox.checked ? 'true' : 'false');

            addLog('ğŸš€ æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ', 'success');
            addLog('ğŸ’¡ æç¤ºï¼šæ‰“å¼€ Chrome æ‰©å±•ï¼Œç‚¹å‡»"æ‰§è¡Œäº¤æ˜“"æŒ‰é’®è¿›è¡Œæµ‹è¯•', 'info');
            addLog('âš ï¸ å½“å‰ä»·æ ¼: 0.00120 USDT', 'info');
            addLog('ğŸ’¼ åˆå§‹ä½™é¢: 1000.00 USDT', 'info');
        });

        // æ¨¡æ‹Ÿä»·æ ¼å˜åŠ¨
        setInterval(() => {
            const priceElement = document.querySelector('.flex-1.cursor-pointer');
            const currentPrice = parseFloat(priceElement.textContent);
            const change = (Math.random() - 0.5) * 0.00002;
            const newPrice = (currentPrice + change).toFixed(5);
            priceElement.textContent = newPrice;
        }, 3000);
    </script>
</body>
</html>
